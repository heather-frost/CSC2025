Microsoft (R) Macro Assembler Version 14.41.34120.0	    11/07/24 16:40:40
gameLoop.asm						     Page 1 - 1


				; Main Console program
				; Spencer Medberry
				; 1 November 2024
				; gameLoop adapted from fibonacci counter

				; Register usage:
				;     EAX - readWrite procedure communication
				;     EBX - integer user input result for term counting
				;     ECX - helper register: char storage during ASCII conversion

				.model flat

				extern writeline: near
				extern readline: near
				extern charCount: near
				extern writeNumber: near

 00000000			.data

				; both end with 0 to terminate the string
 00000000 4F 70 65 6E 69	prompt              byte  "Opening gameLoop prompt here: OLD PROMPT: Enter a number between 1 and 45: ", 0
	   6E 67 20 67 61
	   6D 65 4C 6F 6F
	   70 20 70 72 6F
	   6D 70 74 20 68
	   65 72 65 3A 20
	   4F 4C 44 20 50
	   52 4F 4D 50 54
	   3A 20 45 6E 74
	   65 72 20 61 20
	   6E 75 6D 62 65
	   72 20 62 65 74
	   77 65 65 6E 20
	   31 20 61 6E 64
	   20 34 35 3A 20
	   00
				; beginning with 10 sends a line feed character before the text
 0000004C 0A 53 74 61 72	gameLoopDialog     byte  10,"Starting with 1 and 2, the terms produced are: ",0
	   74 69 6E 67 20
	   77 69 74 68 20
	   31 20 61 6E 64
	   20 32 2C 20 74
	   68 65 20 74 65
	   72 6D 73 20 70
	   72 6F 64 75 63
	   65 64 20 61 72
	   65 3A 20 00
 0000007D 50 6C 65 61 73	invalidInputDialog    byte  "Please enter a valid input.",10,10,0
	   65 20 65 6E 74
	   65 72 20 61 20
	   76 61 6C 69 64
	   20 69 6E 70 75
	   74 2E 0A 0A 00
 0000009B 59 6F 75 20 62	gameOverDialog      byte    "You blew up!",10,10,0
	   6C 65 77 20 75
	   70 21 0A 0A 00
 000000AA 0A 0A 54 68 65	finalTerm           byte  10,10,"The value of term ",0
	   20 76 61 6C 75
	   65 20 6F 66 20
	   74 65 72 6D 20
	   00
 000000BF 69 73 20		finalDialog         byte  "is "

 00000000			.code

				;; Call gameLoop() - No Parameters, no return value
 00000000			gameLoop PROC near
 00000000			_gameLoop:

 00000000			Setup:
				;GAME SETUP GOES HERE

 00000000			gameLoopStart:
				    ; DISPLAY GAME STATE
				        ;; Call charCount(addr)
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;; Returns character count in eax
 00000000  68 00000000 R	    push  offset prompt
 00000005  E8 00000000 E	    call  charCount
				        ;; Call writeline(addr, chars) - push parameter in reverse order
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;;             chars is the character count in the buffer
				        ;; Returns nothing
 0000000A  50			    push  eax
 0000000B  68 00000000 R	    push  offset prompt
 00000010  E8 00000000 E	    call  writeline

				    ; ACCEPT USER INPUT
				        ;; Call readline() - No Parameters, Returns ptr to buffer in eax
 00000015  E8 00000000 E	    call  readline
				    ; user input stored in eax
				    
				    ;convert user input from ASCII to integer
 0000001A  B9 00000000		    mov   ecx,0
 0000001F  BB 00000000		    mov   ebx,0
 00000024			ASCIIloop:
 00000024  8A 08		    mov  cl,[eax]                   ; Look at the character in the string
 00000026  83 F9 0D		    cmp  ecx,13                     ; check for carriage return.
 00000029  74 15		    je numberGet
 0000002B  83 F9 0A		    cmp  ecx,10                     ; check for line feed.
 0000002E  74 10		    je numberGet
 00000030  83 F9 00		    cmp  ecx,0                      ; check for end of string.
 00000033  74 0B		    je numberGet
 00000035  80 E9 30		    sub  cl,'0'
 00000038  6B DB 0A		    imul ebx,10
 0000003B  03 D9		    add  ebx,ecx
 0000003D  40			    inc  eax                        ; go to next letter
 0000003E  EB E4		    jmp  ASCIIloop
 00000040			numberGet:
 00000040  83 FB 2D		    cmp ebx,45
 00000043  7F 53		    jg invalidInputError
 00000045  83 FB 01		    cmp ebx,1
 00000048  7C 4E		    jl invalidInputError



				;VICTORY
 0000004A  50			    push eax    ;2nd writeNumber parameter
 0000004B  53			    push ebx    ;1st writeNumber parameter
				        ;; Call charCount(addr)
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;; Returns character count in eax
 0000004C  68 000000AA R	    push  offset finalTerm
 00000051  E8 00000000 E	    call  charCount
				        ;; Call writeline(addr, chars) - push parameter in reverse order
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;;             chars is the character count in the buffer
				        ;; Returns nothing
 00000056  50			    push  eax
 00000057  68 000000AA R	    push  offset finalTerm
 0000005C  E8 00000000 E	    call  writeline
				        ;; Call writeNumber(number) - print the ASCII value of a number.
				        ;; Parameter: number is number to be converted to Ascii and printed.
				        ;; Returns nothing
 00000061  E8 00000000 E	    call  writeNumber
				        ;; Call charCount(addr)
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;; Returns character count in eax
 00000066  68 000000BF R	    push  offset finalDialog
 0000006B  E8 00000000 E	    call  charCount
				        ;; Call writeline(addr, chars) - push parameter in reverse order
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;;             chars is the character count in the buffer
				        ;; Returns nothing
 00000070  50			    push  eax
 00000071  68 000000BF R	    push  offset finalDialog
 00000076  E8 00000000 E	    call  writeline
				        ;; Call writeNumber(number) - print the ASCII value of a number.
				        ;; Parameter: number is number to be converted to Ascii and printed.
				        ;; Returns nothing
 0000007B  E8 00000000 E	    call  writeNumber

 00000080			playAgain:
				    
 00000080			exit:
 00000080  C3			    ret     ; Return to the main program.

 00000081			gameOver:
				    ; Print gameOverDialog
				        ;; Call charCount(addr)
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;; Returns character count in eax
 00000081  68 0000009B R	    push  offset gameOverDialog
 00000086  E8 00000000 E	    call  charCount
				        ;; Call writeline(addr, chars) - push parameter in reverse order
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;;             chars is the character count in the buffer
				        ;; Returns nothing
 0000008B  50			    push  eax
 0000008C  68 0000009B R	    push  offset gameOverDialog
 00000091  E8 00000000 E	    call  writeline
 00000096  EB E8		    jmp playAgain
				; End gameOver

 00000098			invalidInputError:
				    ; Print invalidInputDialog
				        ;; Call charCount(addr)
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;; Returns character count in eax
 00000098  68 0000007D R	    push  offset invalidInputDialog
 0000009D  E8 00000000 E	    call  charCount
				        ;; Call writeline(addr, chars) - push parameter in reverse order
				        ;; Parameters: addr is address of buffer = &addr[0]
				        ;;             chars is the character count in the buffer
				        ;; Returns nothing
 000000A2  50			    push  eax
 000000A3  68 0000007D R	    push  offset invalidInputDialog
 000000A8  E8 00000000 E	    call  writeline
 000000AD  E9 FFFFFF4E		    jmp _gameLoop
				; End invalidInputError
				    
 000000B2			gameLoop ENDP
				END
Microsoft (R) Macro Assembler Version 14.41.34120.0	    11/07/24 16:40:40
gameLoop.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

FLAT . . . . . . . . . . . . . .	GROUP
_DATA  . . . . . . . . . . . . .	32 Bit	 000000C2 Para	  Public  'DATA'	
_TEXT  . . . . . . . . . . . . .	32 Bit	 000000B2 Para	  Public  'CODE'	


Procedures, parameters, and locals:

                N a m e                 Type     Value    Attr

gameLoop . . . . . . . . . . . .	P Near	 00000000 _TEXT	Length= 000000B2 Public
  _gameLoop  . . . . . . . . . .	L Near	 00000000 _TEXT	
  Setup  . . . . . . . . . . . .	L Near	 00000000 _TEXT	
  gameLoopStart  . . . . . . . .	L Near	 00000000 _TEXT	
  ASCIIloop  . . . . . . . . . .	L Near	 00000024 _TEXT	
  numberGet  . . . . . . . . . .	L Near	 00000040 _TEXT	
  playAgain  . . . . . . . . . .	L Near	 00000080 _TEXT	
  exit . . . . . . . . . . . . .	L Near	 00000080 _TEXT	
  gameOver . . . . . . . . . . .	L Near	 00000081 _TEXT	
  invalidInputError  . . . . . .	L Near	 00000098 _TEXT	


Symbols:

                N a m e                 Type     Value    Attr

@CodeSize  . . . . . . . . . . .	Number	 00000000h   
@DataSize  . . . . . . . . . . .	Number	 00000000h   
@Interface . . . . . . . . . . .	Number	 00000000h   
@Model . . . . . . . . . . . . .	Number	 00000007h   
@code  . . . . . . . . . . . . .	Text   	 _TEXT
@data  . . . . . . . . . . . . .	Text   	 FLAT
@fardata?  . . . . . . . . . . .	Text   	 FLAT
@fardata . . . . . . . . . . . .	Text   	 FLAT
@stack . . . . . . . . . . . . .	Text   	 FLAT
charCount  . . . . . . . . . . .	L Near	 00000000 FLAT	External
finalDialog  . . . . . . . . . .	Byte	 000000BF _DATA	
finalTerm  . . . . . . . . . . .	Byte	 000000AA _DATA	
gameLoopDialog . . . . . . . . .	Byte	 0000004C _DATA	
gameOverDialog . . . . . . . . .	Byte	 0000009B _DATA	
invalidInputDialog . . . . . . .	Byte	 0000007D _DATA	
prompt . . . . . . . . . . . . .	Byte	 00000000 _DATA	
readline . . . . . . . . . . . .	L Near	 00000000 FLAT	External
writeNumber  . . . . . . . . . .	L Near	 00000000 FLAT	External
writeline  . . . . . . . . . . .	L Near	 00000000 FLAT	External

	   0 Warnings
	   0 Errors
